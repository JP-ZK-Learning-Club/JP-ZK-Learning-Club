# 算術回路

一般にブール回路で算術回路を表すと冗長になります。
例えば、`10`をブール回路で扱うには2進数にする必要があり、`1010`と表記されます。
これを計算に利用するには各桁をそれぞれ入力として扱うため、4つの入力になります。

さらに単純な足し算でもAND, OR, NOTのみで表すと回路の表記が非常に長くなります。

算術回路では加算と乗算のみで、数式をシンプルな形で表記することができます。
算術回路では与えられた入力が正しいかどうかを確認します。ただし、解を計算するわけではありません。

以下は算術回路の例です。

$$
\begin{aligned}
7 &= a + b \\
10 &= a \cdot b
\end{aligned}
$$

この回路は、$$ a = 2, b = 5 $$ のときに満たされます（どちらの方程式も成立）。一方で、$$ a = 1, b = 2 $$ のときには満たされません。

つまり、算術回路は「方程式の集まり」として考えることができます。

## ブール回路との違い

| **項目**             | **算術回路**                                                                                                   | **Boolean回路**                                                                                                    |
|----------------------|----------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|
| **表現力**           | 数値計算（加算、乗算、多項式評価など）に特化し、数値演算を効率的に表現可能。                                             | 論理演算に特化し、論理式や条件分岐の表現に適している。                                                              |
| **計算の対象**       | 実数や整数を扱うため、数値データの処理が容易。                                                                     | ビット（0, 1）を扱うため、真理値や離散データの処理に適している。                                                    |
| **ゲートの種類**      | 加算ゲート、乗算ゲートが中心。場合によっては定数ゲートも含む。                                                          | AND、OR、NOTなどの論理ゲートが基本。                                                                               |
| **構成の複雑さ**      | 設計が比較的シンプルで、多項式の評価に適しているが、条件分岐や論理計算の表現には不向き。                                       | 条件分岐や複雑な論理を直接的に表現できるが、多くのビット演算を必要とする計算（例: 数値演算）は非効率。                                                  |


## Circom
算術回路を表現するプログラミング言語Circomについて解説します。

Circomでは回路で扱う変数をSignalと呼び、等価であることを表すのに`===`を用います。

例えば、aが3と等価であることを表すのには以下のように表記します。

```
a === 3
```

これは`assert(a, 3)`とチェックしていると同義です。
この場合、`a`は3以外の解はありませんが、以下を満たす変数の組み合わせは無限に存在します。（Circom上では有限体上の計算となるので、有限個の組み合わせになります）

```
a === b + c
```

## ブール回路を算術回路に変換
ブール回路を算術回路で表現するには、まずは0,1の入力のみを受け付けるようにします。

```
A * (A - 1) === 0
B * (B - 1) === 0
```

これで`A`と`B`が0もしくは1であることをチェックします。
次に以下のような

```
AND_result <== A * B
OR_result <== A + B - A * B
NOT_result <== 1 - A
```
